let status=$("#imagethief-status"),logs=$("#imagethief-logs"),update_status_repeater,update_logs_repeater,isFocusedLogs=!1;function StartImageThief(e,t){$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-start/",data:{url:e,mode:t},mode:"same-origin",success:function(e){clearInterval(update_status_repeater),$("input[name=mod]").attr("disabled",!1),$("#modes_block").css("color","black"),$("#imagethief-results-images").attr("href",e.imgs_path),$("#imagethief_text_inButton").text(e.btn),$("#current_try").text(e.try),$("#total_try").text(e.try_limit),$("#container_imagethief-results").show(),$("#container_imagethief-status").hide(),clearInterval(update_status_repeater),$("#start").off(),$("#start").on("click",InitImageThief)},error:function(e){$("input[name=mod]").attr("disabled",!1),$("#modes_block").css("color","black"),$("#container_imagethief-status").hide(),$("#container_imagethief-results").hide(),$("#imagethief_text_inButton").text(e.responseJSON.btn),$("#verbose-error").text(e.responseJSON.status_msg),$("#current_try").text(e.responseJSON.try),$("#total_try").text(e.responseJSON.try_limit),clearInterval(update_status_repeater),$("#start").off(),$("#start").on("click",InitImageThief)}})}function InitImageThief(){var e=$("#url").val(),t=$("input[name=mod]:checked").val();$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-init/",data:{url:e,mode:t},mode:"same-origin",success:function(e){$("input[name=mod]").attr("disabled",!0),$("#modes_block").css("color","grey"),$("#container_imagethief-status").show(),$("#container_imagethief-results").hide(),$("#imagethief_text_inButton").text(e.btn),$("#verbose-error").text(e.status_msg),update_status_repeater=setInterval(UpdateStatus,1e3),$("#start").off(),$("#start").on("click",StopImageThief),StartImageThief(e.url,e.mode),$("#imagethief-logs").text("")},error:function(e){$("#verbose-error").text(e.responseJSON.status_msg)}})}function StopImageThief(){$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-stop/",mode:"same-origin",success:function(e){$("input[name=mod]").attr("disabled",!1),$("#modes_block").css("color","black"),$("#container_imagethief-status").hide(),$("#container_imagethief-results").hide(),$("#imagethief_text_inButton").text(e.btn),clearInterval(update_status_repeater),$("#start").off(),$("#start").on("click",InitImageThief)}})}function ToggleStatus(){update_status_repeater?(clearInterval(update_status_repeater),update_status_repeater=void 0):update_status_repeater=setInterval(UpdateStatus,1e3)}function ToggleVerbose(){var e=$(this).attr("checked");$("#container_imagethief-logs").toggle(),$("#verbose-error").text(""),update_logs_repeater?(clearInterval(update_logs_repeater),update_logs_repeater=void 0):update_logs_repeater=setInterval(UpdateLogs,1e3)}function UpdateStatus(){$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-update_status/",mode:"same-origin",success:function(e){i_progressbar=$("#imagethief-progressbar"),i_statustext=$("#imagethief-statustext"),i_statustext_current=$("#imagethief-statustext_current"),i_statustext_total=$("#imagethief-statustext_total"),i_statustext.text(""),i_statustext.append(e.period),i_statustext_current.text(""),i_statustext_current.append(e.current),i_statustext_total.text(""),i_statustext_total.append(e.total)}})}function UpdateLogs(){$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-update_logs/",data:{},mode:"same-origin",success:function(e){$("#verbose-error").text(e.msg_er);let n=$("#imagethief-logs");n.append(e.msg);let s=n.height(),t=$("#imagethief-logs_block");t.height(s),t.on("focus",function(){isFocusedLogs=!0}),t.on("focusout",function(){isFocusedLogs=!1}),isFocusedLogs||t.scrollTop(t[0].scrollHeight)},error:function(){clearInterval(update_logs_repeater)}})}function TabClosed(){$.ajax({type:"GET",url:"/"+language_code+"/tools/image_thief-tabclosed/",data:{},mode:"same-origin",success:function(){clearInterval(update_logs_repeater),clearInterval(update_status_repeater)}})}$(document).ready(function(){$("#start").on("click",InitImageThief),$("#verbose").on("click",ToggleVerbose),window.addEventListener("beforeunload",TabClosed)})