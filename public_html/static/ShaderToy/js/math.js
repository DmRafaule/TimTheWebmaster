var math={projection:function(e,t){return[2/e,0,0,0,-2/t,0,-1,1,1]},perspective:function(e,t,n,s){var o=Math.tan(Math.PI*.5-.5*e),i=1/(n-s);return[o/t,0,0,0,0,o,0,0,0,0,(n+s)*i,-1,0,0,n*s*i*2,0]},orthographic:function(e,t,n,s,o,i){return[2/(t-e),0,0,0,0,2/(s-n),0,0,0,0,2/(o-i),0,(e+t)/(e-t),(n+s)/(n-s),(o+i)/(o-i),1]},identity:function(){return[1,0,0,0,1,0,0,0,1]},identity3d:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},inverse:function(e){var s=e[0*4+0],v=e[0*4+1],c=e[0*4+2],m=e[0*4+3],i=e[1*4+0],d=e[1*4+1],r=e[1*4+2],a=e[1*4+3],n=e[2*4+0],l=e[2*4+1],u=e[2*4+2],h=e[2*4+3],o=e[3*4+0],f=e[3*4+1],p=e[3*4+2],g=e[3*4+3],B=u*g,O=p*h,F=r*g,y=p*a,_=r*h,w=u*a,b=c*g,x=p*m,C=c*h,E=u*m,k=c*a,A=r*m,S=n*f,M=o*l,j=i*f,T=o*d,z=i*l,D=n*d,N=s*f,L=o*v,R=s*l,P=n*v,H=s*d,I=i*v,U=B*d+y*l+_*f-(O*d+F*l+w*f),V=O*v+b*l+E*f-(B*v+x*l+C*f),$=F*v+x*d+k*f-(y*v+b*d+A*f),W=w*v+C*d+A*l-(_*v+E*d+k*l),t=1/(s*U+i*V+n*$+o*W);return[t*U,t*V,t*$,t*W,t*(O*i+F*n+w*o-(B*i+y*n+_*o)),t*(B*s+x*n+C*o-(O*s+b*n+E*o)),t*(y*s+b*i+A*o-(F*s+x*i+k*o)),t*(_*s+E*i+k*n-(w*s+C*i+A*n)),t*(S*a+T*h+z*g-(M*a+j*h+D*g)),t*(M*m+N*h+P*g-(S*m+L*h+R*g)),t*(j*m+L*a+H*g-(T*m+N*a+I*g)),t*(D*m+R*a+I*h-(z*m+P*a+H*h)),t*(j*u+D*p+M*r-(z*p+S*r+T*u)),t*(R*p+S*c+L*u-(N*u+P*p+M*c)),t*(N*r+I*p+T*c-(H*p+j*c+L*r)),t*(H*u+z*c+P*r-(R*r+I*u+D*c))]},multiply:function(e,t){var n=e[0*3+0],s=e[0*3+1],o=e[0*3+2],i=e[1*3+0],a=e[1*3+1],r=e[1*3+2],c=e[2*3+0],l=e[2*3+1],d=e[2*3+2],u=t[0*3+0],h=t[0*3+1],m=t[0*3+2],f=t[1*3+0],p=t[1*3+1],g=t[1*3+2],v=t[2*3+0],b=t[2*3+1],j=t[2*3+2];return[u*n+h*i+m*c,u*s+h*a+m*l,u*o+h*r+m*d,f*n+p*i+g*c,f*s+p*a+g*l,f*o+p*r+g*d,v*n+b*i+j*c,v*s+b*a+j*l,v*o+b*r+j*d]},multiply4x4:function(e,t){var n=e[0*4+0],s=e[0*4+1],o=e[0*4+2],i=e[0*4+3],a=e[1*4+0],r=e[1*4+1],c=e[1*4+2],l=e[1*4+3],d=e[2*4+0],u=e[2*4+1],h=e[2*4+2],m=e[2*4+3],f=e[3*4+0],p=e[3*4+1],g=e[3*4+2],v=e[3*4+3],b=t[0*4+0],j=t[0*4+1],y=t[0*4+2],_=t[0*4+3],w=t[1*4+0],O=t[1*4+1],x=t[1*4+2],C=t[1*4+3],E=t[2*4+0],k=t[2*4+1],A=t[2*4+2],S=t[2*4+3],M=t[3*4+0],F=t[3*4+1],T=t[3*4+2],z=t[3*4+3];return[b*n+j*a+y*d+_*f,b*s+j*r+y*u+_*p,b*o+j*c+y*h+_*g,b*i+j*l+y*m+_*v,w*n+O*a+x*d+C*f,w*s+O*r+x*u+C*p,w*o+O*c+x*h+C*g,w*i+O*l+x*m+C*v,E*n+k*a+A*d+S*f,E*s+k*r+A*u+S*p,E*o+k*c+A*h+S*g,E*i+k*l+A*m+S*v,M*n+F*a+T*d+z*f,M*s+F*r+T*u+z*p,M*o+F*c+T*h+z*g,M*i+F*l+T*m+z*v]},multiply4x42:function(e,t,n){var s=e[0*4+0],o=e[0*4+1],i=e[0*4+2],a=e[0*4+3],r=e[1*4+0],c=e[1*4+1],l=e[1*4+2],d=e[1*4+3],u=e[2*4+0],h=e[2*4+1],m=e[2*4+2],f=e[2*4+3],p=e[3*4+0],g=e[3*4+1],v=e[3*4+2],b=e[3*4+3],j=t[0*4+0],y=t[0*4+1],_=t[0*4+2],w=t[0*4+3],O=t[1*4+0],x=t[1*4+1],C=t[1*4+2],E=t[1*4+3],k=t[2*4+0],A=t[2*4+1],S=t[2*4+2],M=t[2*4+3],F=t[3*4+0],T=t[3*4+1],z=t[3*4+2],D=t[3*4+3];return n=n||new MatType(16),n[0]=j*s+y*r+_*u+w*p,n[1]=j*o+y*c+_*h+w*g,n[2]=j*i+y*l+_*m+w*v,n[3]=j*a+y*d+_*f+w*b,n[4]=O*s+x*r+C*u+E*p,n[5]=O*o+x*c+C*h+E*g,n[6]=O*i+x*l+C*m+E*v,n[7]=O*a+x*d+C*f+E*b,n[8]=k*s+A*r+S*u+M*p,n[9]=k*o+A*c+S*h+M*g,n[10]=k*i+A*l+S*m+M*v,n[11]=k*a+A*d+S*f+M*b,n[12]=F*s+T*r+z*u+D*p,n[13]=F*o+T*c+z*h+D*g,n[14]=F*i+T*l+z*m+D*v,n[15]=F*a+T*d+z*f+D*b,n},translation:function(e,t){return[1,0,0,0,1,0,e,t,1]},translation3d:function(e,t,n){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1]},translation3d2:function(e,t,n,s){return s=s||new MatType(16),s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=e,s[13]=t,s[14]=n,s[15]=1,s},rotation:function(e){var t=Math.cos(e),n=Math.sin(e);return[t,-n,0,n,t,0,0,0,1]},xRotation:function(e){var t=Math.cos(e),n=Math.sin(e);return[1,0,0,0,0,t,n,0,0,-n,t,0,0,0,0,1]},yRotation:function(e){var t=Math.cos(e),n=Math.sin(e);return[t,0,-n,0,0,1,0,0,n,0,t,0,0,0,0,1]},zRotation:function(e){var t=Math.cos(e),n=Math.sin(e);return[t,n,0,0,-n,t,0,0,0,0,1,0,0,0,0,1]},scaling:function(e,t){return[e,0,0,0,t,0,0,0,1]},scaling3d:function(e,t,n){return[e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1]},translate:function(e,t,n,s){return math.multiply4x4(e,math.translation3d(t,n,s))},xRotate:function(e,t){return math.multiply4x4(e,math.xRotation(t))},yRotate:function(e,t){return math.multiply4x4(e,math.yRotation(t))},zRotate:function(e,t){return math.multiply4x4(e,math.zRotation(t))},xRotate2:function(e,t,n){return math.multiply4x42(e,math.xRotation(t),n)},yRotation2:function(e){var n=Math.cos(e),s=Math.sin(e);return[n,0,-s,0,0,1,0,0,s,0,n,0,0,0,0,1]},zRotation2:function(e){var n=Math.cos(e),s=Math.sin(e);return[n,s,0,0,-s,n,0,0,0,0,1,0,0,0,0,1]},scale:function(e,t,n,s){return math.multiply4x4(e,math.scaling3d(t,n,s))},vectorMultiply:function(e,t){for(var s,o=[],n=0;n<4;++n){o[n]=0;for(s=0;s<4;++s)o[n]+=e[s]*t[s*4+n]}return o},transformVector:function(e,t,n){n=n||new Float32Array(4);for(var o,s=0;s<4;++s){n[s]=0;for(o=0;o<4;++o)n[s]+=t[o]*e[o*4+s]}return n},transpose:function(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},cross:function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},subtractVectors:function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},normalize:function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return t>1e-5?[e[0]/t,e[1]/t,e[2]/t]:[0,0,0]},lookAt:function(e,t,n){var s=math.normalize(math.subtractVectors(e,t)),o=math.normalize(math.cross(n,s)),i=math.normalize(math.cross(s,o));return[o[0],o[1],o[2],0,i[0],i[1],i[2],0,s[0],s[1],s[2],0,e[0],e[1],e[2],1]}}