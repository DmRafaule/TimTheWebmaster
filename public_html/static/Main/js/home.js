let FindNextButton=null,FindPrevButton=null;function findNextButtonMobile(){var t=$(".home_buttons_mobile");return t.find(".next_post")}function findPrevButtonMobile(){var t=$(".home_buttons_mobile");return t.find(".prev_post")}function findNextButtonDesktop(e){var t=e.next();return t.find(".next_post")}function findPrevButtonDesktop(e){var t=e.next();return t.find(".prev_post")}function loadPosts(e,t,n,s,o){$.ajax({type:"GET",url:"load_post_preview-"+e+"/",data:{number:s,offset:o,category:e,is_recent:!0,for_who:t},mode:"same-origin",success:function(e){if(o<s){var i,a,t=FindPrevButton(n);t.addClass("inactive_button"),t[0].removeEventListener("click",loadPrevPosts)}else t=FindPrevButton(n),t.removeClass("inactive_button"),t[0].addEventListener("click",loadPrevPosts,{once:!0});n.append(e),i=parseInt(n.find(".data-holder").data("length")),i>o&&(n.text(""),n.append(e),a=n.find(".home_post"),a.addClass("loader"),o+s>=i?(t=FindNextButton(n),t.addClass("inactive_button"),t[0].removeEventListener("click",loadNextPosts)):(t=FindNextButton(n),t.removeClass("inactive_button"),t[0].addEventListener("click",loadNextPosts,{once:!0})))}})}function loadPrevPosts(){var s=this.dataset.targetcontainer,e=document.getElementById(s),o=e.dataset.category,i=e.dataset.forwho,n=parseInt(e.dataset.howmuch),t=parseInt(e.dataset.offset);t-=n,e.dataset.offset=t,loadPosts(o,i,$(e),n,t)}function loadNextPosts(){var s=this.dataset.targetcontainer,e=document.getElementById(s),o=e.dataset.category,i=e.dataset.forwho,n=parseInt(e.dataset.howmuch),t=parseInt(e.dataset.offset);t+=n,e.dataset.offset=t,loadPosts(o,i,$(e),n,t)}function updateButtons(e,t,n){if(n<t){var o,i,s=FindPrevButton(e);s.addClass("inactive_button"),s[0].removeEventListener("click",loadPrevPosts)}else s=FindPrevButton(e),s.removeClass("inactive_button"),s[0].addEventListener("click",loadPrevPosts,{once:!0});o=parseInt(e.find(".data-holder").data("length")),o>n&&(i=e.find(".home_post"),n+t>=o?(s=FindNextButton(e),s.addClass("inactive_button"),s[0].removeEventListener("click",loadNextPosts)):(s=FindNextButton(e),s.removeClass("inactive_button"),s[0].addEventListener("click",loadNextPosts,{once:!0})))}function onHome(){function s(e){var t={threshold:.7},n=new IntersectionObserver((t)=>{for(const n of t)if(n.isIntersecting){var s,o,i,a,r=document.querySelector(".prev_post");r.dataset.targetcontainer=e.id,o=document.querySelector(".next_post"),o.dataset.targetcontainer=e.id,s=document.getElementById(e.id),i=parseInt(s.dataset.howmuch),a=parseInt(s.dataset.offset),updateButtons($(s),i,a)}},t);n.observe(e)}function o(e){var n={threshold:0},t=new IntersectionObserver((n)=>{for(const s of n)if(s.isIntersecting){var l=e.id,o=document.getElementById(l),i=e.dataset.category,a=e.dataset.forwho,r=parseInt(e.dataset.howmuch),c=parseInt(e.dataset.offset);loadPosts(i,a,$(o),r,c),t.disconnect()}},n);t.observe(e)}const i=document.querySelectorAll(".toLoad");if(i.forEach(e=>{o(e),IS_MOBILE&&s(e)}),IS_MOBILE){FindNextButton=findNextButtonMobile,FindPrevButton=findPrevButtonMobile;const s=document.querySelectorAll(".home_buttons");for(var t,n,e=1;e<s.length;e++)s[e].remove();const o=s[0];t=document.querySelector(".home_title"),t.insertAdjacentElement("afterend",o),o.classList.add("home_buttons_mobile"),n=document.querySelectorAll("h2"),n.forEach(e=>{e.classList.remove("in_middle-self")})}else{FindNextButton=findNextButtonDesktop,FindPrevButton=findPrevButtonDesktop;const e=document.querySelectorAll(".prev_post");e.forEach(e=>{e.addEventListener("click",loadPrevPosts)});const t=document.querySelectorAll(".next_post");t.forEach(e=>{e.addEventListener("click",loadNextPosts)})}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",onHome):onHome()