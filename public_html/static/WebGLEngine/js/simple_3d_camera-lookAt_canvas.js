function makeZToWMatrix(e){return[1,0,0,0,0,1,0,0,0,0,1,e,0,0,0,1]}function SetColorbuffer(e){e.bufferData(e.ARRAY_BUFFER,new Uint8Array([200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,70,200,210,70,200,210,70,200,210,70,200,210,70,200,210,70,200,210,200,200,70,200,200,70,200,200,70,200,200,70,200,200,70,200,200,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,160,70,210,160,70,210,160,70,210,160,70,210,160,70,210,160,70,70,180,210,70,180,210,70,180,210,70,180,210,70,180,210,70,180,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,76,210,100,76,210,100,76,210,100,76,210,100,76,210,100,76,210,100,140,210,80,140,210,80,140,210,80,140,210,80,140,210,80,140,210,80,90,130,110,90,130,110,90,130,110,90,130,110,90,130,110,90,130,110,160,160,220,160,160,220,160,160,220,160,160,220,160,160,220,160,160,220]),e.STATIC_DRAW)}function CreateF_Letter3d(e){for(var s,t=new Float32Array([0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0]),o=math.xRotation(Math.PI),o=math.translate(o,-50,-75,-15),n=0;n<t.length;n+=3)s=math.vectorMultiply([t[n+0],t[n+1],t[n+2],1],o),t[n+0]=s[0],t[n+1]=s[1],t[n+2]=s[2];e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}function Degree2Radian(e){return e*Math.PI/180}function createShader(e,t,n){var o,s=e.createShader(t);if(e.shaderSource(s,n),e.compileShader(s),o=e.getShaderParameter(s,e.COMPILE_STATUS),o)return s;console.log(e.getShaderInfoLog(s)),e.deleteShader(s)}function readTextFile(e){var t=new XMLHttpRequest,n="";return t.open("GET",e,!1),t.onreadystatechange=function(){t.readyState===4&&(t.status===200||t.status==0)&&(n=t.responseText)},t.send(null),n}function createProgram(e,t,n){var o,s=e.createProgram();if(e.attachShader(s,t),e.attachShader(s,n),e.linkProgram(s),o=e.getProgramParameter(s,e.LINK_STATUS),o)return s;console.log(e.getProgramInfoLog(s)),e.deleteProgram(s)}function drawScene(){gl.viewport(0,0,gl.canvas.width,gl.canvas.height),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.useProgram(program),gl.enableVertexAttribArray(positionAttributeLocation),gl.uniform2f(resolutionUniformLocation,gl.canvas.width,gl.canvas.height),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);var e,n,s,c,l,d,u,h,m,f,p,g,v,b,j,y,_,r=3,o=gl.FLOAT,i=!1,a=0,t=0;gl.vertexAttribPointer(positionAttributeLocation,r,o,i,a,t),gl.enableVertexAttribArray(colorAttributeLocation),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),r=3,o=gl.UNSIGNED_BYTE,i=!0,a=0,t=0,gl.vertexAttribPointer(colorAttributeLocation,r,o,i,a,t);for(d=gl.canvas.clientWidth/gl.canvas.clientHeight,g=math.perspective(fieldOfView,d,zNear,zFar),l=5,n=200,e=math.yRotation(cameraAngle),e=math.translate(e,0,0,n*1.5),p=[e[12],e[13],e[14]],u=[0,1,0],h=[n,0,0],e=math.lookAt(p,h,u),m=math.inverse(e),f=math.multiply4x4(g,m),s=0;s<l;++s)c=s*Math.PI*2/l,v=Math.cos(c)*n,b=Math.sin(c)*n,j=math.translate(f,v,0,b),gl.uniformMatrix4fv(matrixUniformLocation,!1,j),y=gl.TRIANGLES,t=0,_=16*6,gl.drawArrays(y,t,_)}var canvas=document.querySelector("#canvas"),vertexShaderPath,fragmentShaderPath,vertexShaderSource,fragmentShaderSource,vertexShader,fragmentShader,program,positionAttributeLocation,colorAttributeLocation,resolutionUniformLocation,matrixUniformLocation,positionBuffer,cameraAngle,fieldOfView,zNear,zFar,translation,rotation,scale,width,height,color,colorBuffer,gl=canvas.getContext("webgl2");gl.enable(gl.CULL_FACE),gl.enable(gl.DEPTH_TEST),gl||console.log("OpenGl is not avaiable"),vertexShaderPath=canvas.dataset.vertexShader,fragmentShaderPath=canvas.dataset.fragmentShader,vertexShaderSource=readTextFile(vertexShaderPath),fragmentShaderSource=readTextFile(fragmentShaderPath),vertexShader=createShader(gl,gl.VERTEX_SHADER,vertexShaderSource),fragmentShader=createShader(gl,gl.FRAGMENT_SHADER,fragmentShaderSource),program=createProgram(gl,vertexShader,fragmentShader),positionAttributeLocation=gl.getAttribLocation(program,"a_position"),colorAttributeLocation=gl.getAttribLocation(program,"a_color"),resolutionUniformLocation=gl.getUniformLocation(program,"u_resolution"),matrixUniformLocation=gl.getUniformLocation(program,"u_matrix"),positionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer),cameraAngle=0,fieldOfView=Degree2Radian(60),zNear=1,zFar=2e3,translation=[0,0,-400],rotation=[1,1,1],scale=[1,1,1],width=100,height=30,color=[Math.random(),Math.random(),Math.random(),1],CreateF_Letter3d(gl),colorBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),SetColorbuffer(gl),drawScene(),slider_transform_y=document.querySelector("#transform-y"),slider_transform_y.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[1]=e,drawScene()}),slider_transform_x=document.querySelector("#transform-x"),slider_transform_x.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[0]=e,drawScene()}),slider_transform_z=document.querySelector("#transform-z"),slider_transform_z.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[2]=e,drawScene()}),slider_scale_x=document.querySelector("#scale-x"),slider_scale_x.addEventListener("input",function(){var e=parseFloat(this.nextElementSibling.value);scale[0]=e,drawScene()}),slider_scale_y=document.querySelector("#scale-y"),slider_scale_y.addEventListener("input",function(){var e=parseFloat(this.nextElementSibling.value);scale[1]=e,drawScene()}),slider_rotate_x=document.querySelector("#rotation-x"),slider_rotate_x.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);rotation[0]=Degree2Radian(e),drawScene()}),slider_rotate_y=document.querySelector("#rotation-y"),slider_rotate_y.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);cameraAngle=Degree2Radian(e),drawScene()}),slider_rotate_z=document.querySelector("#rotation-z"),slider_rotate_z.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);rotation[2]=Degree2Radian(e),drawScene()}),field_of_view=document.querySelector("#field-of-view"),field_of_view.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);fieldOfView=Degree2Radian(e),drawScene()})