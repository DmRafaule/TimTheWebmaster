function makeZToWMatrix(e){return[1,0,0,0,0,1,0,0,0,0,1,e,0,0,0,1]}function SetColorbuffer(e){e.bufferData(e.ARRAY_BUFFER,new Uint8Array([200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,70,200,210,70,200,210,70,200,210,70,200,210,70,200,210,70,200,210,200,200,70,200,200,70,200,200,70,200,200,70,200,200,70,200,200,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,160,70,210,160,70,210,160,70,210,160,70,210,160,70,210,160,70,70,180,210,70,180,210,70,180,210,70,180,210,70,180,210,70,180,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,100,70,210,76,210,100,76,210,100,76,210,100,76,210,100,76,210,100,76,210,100,140,210,80,140,210,80,140,210,80,140,210,80,140,210,80,140,210,80,90,130,110,90,130,110,90,130,110,90,130,110,90,130,110,90,130,110,160,160,220,160,160,220,160,160,220,160,160,220,160,160,220,160,160,220]),e.STATIC_DRAW)}function CreateF_Letter3d(e){for(var s,t=new Float32Array([0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0]),o=math.xRotation(Math.PI),o=math.translate(o,-50,-75,-15),n=0;n<t.length;n+=3)s=math.vectorMultiply([t[n+0],t[n+1],t[n+2],1],o),t[n+0]=s[0],t[n+1]=s[1],t[n+2]=s[2];e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}function Degree2Radian(e){return e*Math.PI/180}function createShader(e,t,n){var o,s=e.createShader(t);if(e.shaderSource(s,n),e.compileShader(s),o=e.getShaderParameter(s,e.COMPILE_STATUS),o)return s;console.log(e.getShaderInfoLog(s)),e.deleteShader(s)}function readTextFile(e){var t=new XMLHttpRequest,n="";return t.open("GET",e,!1),t.onreadystatechange=function(){t.readyState===4&&(t.status===200||t.status==0)&&(n=t.responseText)},t.send(null),n}function createProgram(e,t,n){var o,s=e.createProgram();if(e.attachShader(s,t),e.attachShader(s,n),e.linkProgram(s),o=e.getProgramParameter(s,e.LINK_STATUS),o)return s;console.log(e.getProgramInfoLog(s)),e.deleteProgram(s)}function drawScene(){resizeCanvasToDisplaySize(gl.canvas),gl.viewport(0,0,gl.canvas.width,gl.canvas.height),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.useProgram(program),gl.enableVertexAttribArray(positionAttributeLocation),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);var t,n,s,a,r,l,u,h,m,f,p,g,v,b,c=3,i=gl.FLOAT,d=!1,o=0,e=0;gl.vertexAttribPointer(positionAttributeLocation,c,i,d,o,e),gl.enableVertexAttribArray(colorAttributeLocation),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),c=3,i=gl.UNSIGNED_BYTE,d=!0,o=0,e=0,gl.vertexAttribPointer(colorAttributeLocation,c,i,d,o,e),m=gl.canvas.clientWidth/gl.canvas.clientHeight,a=math.perspective(fieldOfView,m,zNear,zFar),console.log(a),r=5,t=200,s=math.yRotation(cameraAngle),s=math.translate(s,0,0,t*1.5),l=math.inverse(s),h=math.multiply4x4(a,l),console.log(l);for(n=0;n<r;++n)u=n*Math.PI*2/r,f=Math.cos(u)*t,p=Math.sin(u)*t,g=math.translate(h,f,0,p),gl.uniformMatrix4fv(matrixUniformLocation,!1,g),v=gl.TRIANGLES,e=0,b=16*6,gl.drawArrays(v,e,b)}var canvas=document.querySelector("#canvas"),vertexShaderPath,fragmentShaderPath,vertexShaderSource,fragmentShaderSource,vertexShader,fragmentShader,program,positionAttributeLocation,colorAttributeLocation,matrixUniformLocation,positionBuffer,cameraAngle,fieldOfView,zNear,zFar,translation,rotation,scale,width,height,color,colorBuffer,gl=canvas.getContext("webgl");gl.enable(gl.CULL_FACE),gl.enable(gl.DEPTH_TEST),gl||console.log("OpenGl is not avaiable"),vertexShaderPath=canvas.dataset.vertexShader,fragmentShaderPath=canvas.dataset.fragmentShader,vertexShaderSource=readTextFile(vertexShaderPath),fragmentShaderSource=readTextFile(fragmentShaderPath),vertexShader=createShader(gl,gl.VERTEX_SHADER,vertexShaderSource),fragmentShader=createShader(gl,gl.FRAGMENT_SHADER,fragmentShaderSource),program=createProgram(gl,vertexShader,fragmentShader),positionAttributeLocation=gl.getAttribLocation(program,"a_position"),colorAttributeLocation=gl.getAttribLocation(program,"a_color"),matrixUniformLocation=gl.getUniformLocation(program,"u_matrix"),positionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer),cameraAngle=0,fieldOfView=Degree2Radian(60),zNear=1,zFar=2e3,translation=[0,0,-400],rotation=[1,1,1],scale=[1,1,1],width=100,height=30,color=[Math.random(),Math.random(),Math.random(),1],CreateF_Letter3d(gl),colorBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),SetColorbuffer(gl),drawScene(),slider_transform_y=document.querySelector("#transform-y"),slider_transform_y.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[1]=e,drawScene()}),slider_transform_x=document.querySelector("#transform-x"),slider_transform_x.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[0]=e,drawScene()}),slider_transform_z=document.querySelector("#transform-z"),slider_transform_z.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);translation[2]=e,drawScene()}),slider_scale_x=document.querySelector("#scale-x"),slider_scale_x.addEventListener("input",function(){var e=parseFloat(this.nextElementSibling.value);scale[0]=e,drawScene()}),slider_scale_y=document.querySelector("#scale-y"),slider_scale_y.addEventListener("input",function(){var e=parseFloat(this.nextElementSibling.value);scale[1]=e,drawScene()}),slider_rotate_x=document.querySelector("#rotation-x"),slider_rotate_x.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);rotation[0]=Degree2Radian(e),drawScene()}),slider_rotate_y=document.querySelector("#rotation-y"),slider_rotate_y.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);cameraAngle=Degree2Radian(e),drawScene()}),slider_rotate_z=document.querySelector("#rotation-z"),slider_rotate_z.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);rotation[2]=Degree2Radian(e),drawScene()}),field_of_view=document.querySelector("#field-of-view"),field_of_view.addEventListener("input",function(){var e=parseInt(this.nextElementSibling.value);fieldOfView=Degree2Radian(e),drawScene()});function resizeCanvasToDisplaySize(e,t){t=t||1;const n=e.clientWidth*t|0,s=e.clientHeight*t|0;return(e.width!==n||e.height!==s)&&(e.width=n,e.height=s,!0)}