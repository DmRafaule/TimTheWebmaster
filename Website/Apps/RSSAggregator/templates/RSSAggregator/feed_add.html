{% load static %}
{% load i18n %}
{% load RSSA_removeFromListInURL %}
{% load RSSA_addToListInURL %}


{% for field in feed_form %}
    {% if not field.is_hidden %}
    <fieldset class="flex flex-row gap-[10px]">  
        <legend><div>{% trans 'Путь RSS фида' %}</div></legend>
        <div class="flex flex-col w-full">
        {{ field }}
        </div>
        {% if not field.value or not feed_form.is_valid %}
            <button type="submit" class="ttw-button ttw-button_link ttw-button_squared">
                <div class="border ttw-button_squared p-1">
                    <img width="16px" height="16px" class="svg_icon_inverted_black" src="{% static 'RSSAggregator/img/add_feed.svg' %}">
                </div>
            </button>
        {% else %}
            <div class="flex flex-row gap-[10px] flex-wrap basis-[100px]">
                {% if to_add_ness %}
                    <div class="ttw-button ttw-button_link ttw-button_squared">
                        <div class="border ttw-button_squared p-1">
                            <img width="16px" height="16px" class="svg_icon_inverted_black" hx-post="feeds/" hx-target="#new_added_feed" hx-swap="outerHTML" hx-vals='js:{csrfmiddlewaretoken: csrftoken, "feed": "{{field.value}}"}' src="{% static 'RSSAggregator/img/save.svg' %}">
                        </div>
                    </div>
                {% else %}
                    <div class="ttw-button ttw-button_action ttw-button_squared">
                        <div class="border ttw-button_squared p-1">
                            <img width="16px" height="16px" class="svg_icon_inverted_black" src="{% static 'RSSAggregator/img/save.svg' %}">
                        </div>
                    </div>
                {% endif %}
                <a href="{% url 'rss-reader' %}{{field.value|RSSA_removeFromListInURL:feed_urls}}">
                    <div class="ttw-button ttw-button_link ttw-button_squared">
                        <div class="border ttw-button_squared p-1">
                            <img width="16px" height="16px" class="svg_icon_inverted_black" src="{% static 'RSSAggregator/img/delete.svg' %}">
                        </div>
                    </div>
                </a>
            </div>
        {% endif %}
    </fieldset>
    <div class="form_error">{{ field.errors }}</div>
    {% endif %}
{% endfor %}